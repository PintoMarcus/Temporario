DECLARE @RoleName NVARCHAR(255) = N'minha-role'; -- Substitua pelo nome da sua role
DECLARE @SQLCommands NVARCHAR(MAX) = N'';

-- Gerar comandos REVOKE com base nas permiss√µes da role
SELECT @SQLCommands = @SQLCommands + 
    'REVOKE ' + permission_name + 
    ' ON ' + QUOTENAME(schema_name) + '.' + QUOTENAME(o.name) + 
    ' FROM ' + QUOTENAME(@RoleName) + ';' + CHAR(13) + CHAR(10)
FROM sys.database_permissions AS p
INNER JOIN sys.objects AS o ON p.major_id = o.object_id
WHERE grantee_principal_id = DATABASE_PRINCIPAL_ID(@RoleName);

-- Exibir os comandos gerados
PRINT @SQLCommands;
